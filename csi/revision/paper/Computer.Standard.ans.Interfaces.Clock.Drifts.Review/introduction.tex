In contemporary software-intensive systems, the significance of environmental concerns has grown substantially. Early identification of these concerns is paramount, particularly during the architectural design phase when their semantics are most precisely defined \cite{baierprinciples2008, Nouri2018, baouya2022}. Architecture modeling and analysis offer valuable ways to detect data inaccuracies during the initial stages of the system development process \cite{ROULAND2020178}. \cmt{Modeling in component-based technology has emerged as a prominent research and development area due to its pivotal role in facilitating reuse and maintenance \cite{Roulandreuse,crnkovic:06,Baouyasalim2024,AbdelhakimBaouya2021}.}


Clock drift \cite{Schiffer2017} is the gradual deviation of a clock's timekeeping from the reference time. Clocks are employed to synchronize various processes and maintain accurate data viability. However, factors such as manufacturing imperfections and temperature fluctuations \cite{WEBSTER2020101183, WebsterBDFM18, Elsts2018} can cause degradation in a clock's accuracy over time, leading it to drift (or deviate) away from the reference time. \cmt{Consider Aerial Wireless Sensor Networks (AWSNs) \cite{Sulimov2021} as an example. Here, drones rely on sensors like cameras and LiDAR\footnote{Light Detection And Ranging } for data collection, which requires precise timing. Clock drift can disrupt the synchronization between these sensors and the flight controller, leading to misaligned or misinterpreted data.} To mitigate these effects, systems often employ synchronization protocols like Network Time Protocol (NTP) \cite{CHEFROUR202226} for computer networks that regularly adjust their clocks with more accurate reference sources \cite{jonas2012}. \cmt{One synchronization algorithm employed to optimize battery life is the Firefly Gossip Protocol (FiGO) \cite{WEBSTER2020101183, WebsterBDFM18, Oxford2020}. Its main purpose is node synchronization while disseminating
data over WSNs \cite{Breza2008}. The Firefly synchronization mechanism leverages listening windows. Upon startup, a node listens for broadcasts from neighboring agents (in our paper; it will be gateways). If a broadcast is received, the node adjusts its clock time to the average of the advertised times from its neighbors. This process iterates until all nodes synchronize their listening windows. The Gossip protocol, employed alongside Firefly, utilizes a \quot{polite gossip} approach similar to Trickle as mentioned in   \cite{levis2003tsr}.}


\cmt{Formal methods are widely used to mathematically verify properties related to the structure and behavior of physical systems \cite{Nouri2018,Baouyasalim2024,AbdelhakimBaouya2021,BrahamLotfiMediouni2020}. Their application in assessing clock deviation has been investigated in \cite{WEBSTER2020101183}. In this study, the authors verify whether the modeled system including communicating drones adheres to the standard protocols and behaves equivalently to the simulated system (observed through oscillators) using PRISM. It provides a key insight before implementing a swarm of drones. However, the state space explosion problem is addressed by removing some essential parts of the model losing its coherence.} However, these methods often face limitations in terms of scalability. In response, several research works have explored abstraction techniques, such as partial-order reduction \cite{Valmari1992}, \cite{Peled1993}, assume-guarantee reasoning \cite{Pnueli1985, Henzinger1998}, SAT-based model checking \cite{Biere1999, Williams2000}, and symmetry reduction \cite{Clarke1996}. \cmt{While these approaches may lose some detail}, an alternative approach involves capturing the system's behavior through a dedicated simulation platform by reasoning on the generated dataset when deriving a state-based model \cite{Falcone2021, Baouya2022G}. This approach is acceptable by industrials \cite{BAOUYA20191, Davis2013}, which can enhance confidence in the original model's specifications \cite{Chien2022}.

Our work leverages formal methods to enable the specification and analysis of communicating cyber systems, taking into account the inherent challenges presented by variations in clock measurements. We achieve this by employing two complementary description languages that capture the system's structural and behavioral semantics, namely OMNeT++ \cite{omnet2008} and PRISM \cite{Kwiatkowskaprism2011}. \cmt{This allows us to specify the system, detect, and reason for potential clocks inaccuracies.} Specifically, we adopt a two-pronged approach: (1) \emph{Modeling Component-based Architecture}: We utilize OMNeT++ to create a detailed high-fidelity model of the system's component-based architecture. This provides a concrete system implementation and serves as a reference point for our formal analysis. (2)\emph{Formalization and Verification using PRISM}: We use PRISM for expressing and analyzing probabilistic behavior. In particular, we employ Probabilistic Automata (PA) to capture the system's state transitions and Probabilistic Computation Tree Logic (PCTL) \cite{hanssonlogic1994} to express and verify desired properties regarding system behavior. Additionally, we have developed a custom derivation flow accepted by PRISM language that interprets Probabilistic Decision Trees (PDT) generated from OMNeT++ simulation trace. \cmt{This approach is demonstrated through a use case scenario from the European research project CPS4EU \cite{cps4eu2022}. The scenario involves two synchronized drones collaborating on a cooperative lifting task. Synchronization becomes necessary due to temperature variations, differing manufacturing standards, or production spread. Precise synchronization is crucial for maintaining a high-quality lifting service in these situations. Moreover, it is important to note that drones are highly optimized and may not be equipped with traditional clocks.}




\subsection{Contribution overview} 

\cmt{Prior research \cite{Amulya20215, HAUWEELE20201, XIE2018133, Xuxin2019,  Varalakshmi2013, Tsurumi2022, LÃ¼bken2024, Kaburaki2024, Akpinar2020} has not investigated clock deviation modeling from a component-port-connector (CPC) perspective. To address this gap, we propose a novel approach for accurate and early assessment of communication system reliability at the architecture level, considering the impact of clock deviation. Furthermore, we investigate the scalability of the proposed approach to understand its feasibility for a complex architecture.}

\cmt{Based on research conducted by \cite{WEBSTER2020101183} and \cite{Elsts2018}, we have identified three primary sources of clock deviation in systems: 1) variations during production, 2) implementation-specific deviations within the standard, and 3) differences in operating temperatures.} Therefore, our contribution can be summarized as follows:

\begin{enumerate}
   \item \cmt{Formalizing clock deviation-related protocols aims to provide practitioners with mathematical formalism using formal methods.}
   
   \item \cmt{Implementing clock deviation to observe variabilities based on simulation and model-checking.} 

    \item \cmt{Learning rule-based models from the simulation of clock deviation-related protocols to serve as a formal model for probabilistic assessment.}

   \item \cmt{Investigating the scalability of the learned model stemming from simulation. This ensures effective deployment on larger and more complex systems while maintaining accuracy and efficiency.}
   
    \item \cmt{Evaluation of contributions in the context of crane orchestration via drones using PRISM for model-checking and OMNet++ for simulation.}
\end{enumerate}   




\subsection{Outline}
\cmt{The paper is structured as follows: Section~\ref{relatedwork} provides an overview and analysis of related work in this field. Section~\ref{background} provides the necessary background material to understand the proposed approach. Section~\ref{approach} provides the workflow of the approach for investigating clock drift. Section~\ref{communication} explains how manifestations of clock deviation are modeled within CPC models. To demonstrate the effectiveness of our approach, Section~\ref{evaluation} presents a detailed use case involving crane orchestration through a drone system, where various analyses are performed. Section~\ref{discussion} discusses relevant outcomes related to the state space explosion and threats to validity.  Finally, in Section~\ref{conclusion}, we conclude the paper by summarizing key findings and outlining potential directions for future research endeavors.}
